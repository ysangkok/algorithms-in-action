<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Style-Type" content="text/css">
	<title> </title>

</head>
<body bgcolor="white">
	
	<div id="errormessage">
	<h1>Error</h1><br><br>
	<h2>AiA requires Java, JavaScript and Cookies enabled to work. Please enable these features and retry.
	</h2>
	</div>
	
	<div id="appletdiv">
	</div>

	
</body>

<script language="javascript" type="text/javascript">

function getCookieVal (offset)
{ 
	var endstr = document.cookie.indexOf (";", offset);
	if (endstr == -1)
	{
		 endstr = document.cookie.length; 
	}
	return unescape (document.cookie.substring(offset, endstr));
}

function getCookie (name)
{ 
	var arg = name + "=";
	var alen = arg.length;
	var clen = document.cookie.length;
	var i = 0;
	while (i < clen)
	{ 
		var j = i + alen;
		if (document.cookie.substring (i,j) == arg)
		{ 
			return getCookieVal (j); 
		}
		i = document.cookie.indexOf (" ", i) + 1;
		if (i == 0) break;
	} 
	
		return null;
	}

	userName = getCookie("user");
	userLog = getCookie("ulog");
	userID = getCookie("id");
	
	nolog = getCookie("nolog");
	notrace = getCookie("notrace");
	if(nolog == null) nolog="false";
	if(notrace == null) notrace="false";
	
	userLanguage=getCookie("language");
	if(!userLanguage) userLanguage="en";

	if (userName == null || userLog == null)
	{ 
	} 
	else 
	{
		document.getElementById("errormessage").style.display = 'none';
	
		var d = document.getElementById('appletdiv');
		
		var appletTag = document.createElement('applet');
		appletTag.setAttribute('code', 'AppletLauncher.class');
		appletTag.setAttribute('archive', 'aia.jar?language='+userLanguage);
		appletTag.setAttribute('width', 0);
		appletTag.setAttribute('height', 0);
		var p = document.createElement('param')
		p.setAttribute('name', 'CUSER');
		p.setAttribute('value', userName);
		appletTag.appendChild(p);
		

		p = document.createElement('param');
		p.setAttribute('name', 'appletToLoad');
		p.setAttribute('value', 'DFSGraphMapsApplet.class');
		appletTag.appendChild(p);
		
		p = document.createElement('param');
		p.setAttribute('name', 'language');
		p.setAttribute('value', userLanguage);
		appletTag.appendChild(p);
		
		p = document.createElement('param');
		p.setAttribute('name', 'CID');
		p.setAttribute('value', userID);
		appletTag.appendChild(p);
		
		p = document.createElement('param');
		p.setAttribute('name', 'ULOG');
		p.setAttribute('value', userLog);
		appletTag.appendChild(p);
		
		p = document.createElement('param');
		p.setAttribute('name', 'NOLOG');
		p.setAttribute('value', nolog);
		appletTag.appendChild(p);
		
		p = document.createElement('param');
		p.setAttribute('name', 'NOTRACE');
		p.setAttribute('value', notrace);
		appletTag.appendChild(p);
		
		p = document.createElement('param');
		p.setAttribute('name', 'NOSTEP');
		p.setAttribute('value', 'false');
		appletTag.appendChild(p);
		
		p = document.createElement('param');
		p.setAttribute('name', 'NOBACK');
		p.setAttribute('value', 'false');
		appletTag.appendChild(p);
		
		p = document.createElement('param');
		p.setAttribute('name', 'NOEXP');
		p.setAttribute('value', 'false');
		appletTag.appendChild(p);
		
		p = document.createElement('param');
		p.setAttribute('name', 'COOKIES');
		p.setAttribute('value', 'true');
		appletTag.appendChild(p);
		
		d.appendChild(appletTag);		
		
	}

</script>


</html>
